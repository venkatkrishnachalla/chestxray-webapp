<div class="cxr-x-ray-patient-details">
  <div class="patient-details-group">
    <div class="profile-icon">
      <img
        src="../../../../../assets/images/user_icon@3x.png"
        alt="profile-icon"
      />
      <span> {{ reportPageText.patientDetails | uppercase }}</span>
    </div>
    <div class="patient-info">
      <div class="patient-status">
        <span
          >Patient ID: <a>{{ patientInfo.hospitalPatientId }}</a>
        </span>
        <span
          >Status: <a>{{ status }}</a></span
        >
        <span
          >Date of creation:
          <a>{{ patientInfo.lastUpdate | date: 'dd-MM-yyyy' }}</a></span
        >
      </div>
      <div class="patient-name">
        <span
          >Name: <a>{{ patientInfo.name }}</a>
        </span>
        <span>[{{ patientInfo.sex }}]</span>
        <span>{{ patientInfo.age }} <a>Yrs</a></span>
        <span
          >Time: <a>{{ patientInfo.lastUpdate | date: 'HH:mm:ss' }}</a>
        </span>
      </div>
      <div class="doctor-name">
        <span
          >Ref. Physician: <a>{{ patientInfo.referringPhysicianName }}</a></span
        >
      </div>
    </div>
  </div>

  <div class="clinical-history-group">
    <div class="clinical-history-icon">
      <img
        src="../../../../../assets/images/clinical_history@3x.png"
        alt="clinical-history-icon"
      />
      <span> {{ reportPageText.clinicalHistory | uppercase }}</span>
    </div>
    <div class="clinical-info"></div>
  </div>

  <div class="impression-group">
    <div class="impression-icon">
      <img
        src="../../../../../assets/images/impression_icon@3x.png"
        alt="finding-icon"
      />
      <span> {{ reportPageText.impressions | uppercase }}</span>
    </div>
    <div class="impression-info">
      <ul>
        <li
          *ngFor="let impression of annotatedImpression"
          contentEditable="false"
        >
          > {{ impression.name }}
        </li>
      </ul>
    </div>
  </div>

  <div class="findings-group">
    <div class="findings-icon">
      <img
        src="../../../../../assets/images/findings_icon@3x.png"
        alt="finding-icon"
      />
      <span> {{ reportPageText.findings | uppercase }}</span>
    </div>
    <div class="findings-info">
      <ul>
        <li
          *ngFor="let finding of annotatedFindings; let i = index"
          (focusout)="updateFindings($event, i)"
          contentEditable="true"
        >
          > {{ finding }}
        </li>
      </ul>
    </div>
  </div>

  <div class="comments-group">
    <div class="comments-icon">
      <img
        src="../../../../../assets/images/comment_icon@3x.png"
        alt="comments-icon"
      />
      <span> {{ reportPageText.commentsAndRecommendations | uppercase }}</span>
    </div>
    <textarea
      contentEditable="true"
      name="comments"
      ngDefaultControl
      [(ngModel)]="comments"
      class="comments-info"
      (ngModelChange)="commentsChange($event)"
    ></textarea>
  </div>
</div>

<!-- Print option -->
<div class="print-patient-details">
  <div class="patient-grid-container">
    <div>
      <span class="field-title"
        >Patient ID: <a>{{ patientInfo.hospitalPatientId }}</a>
      </span>
    </div>
    <div>
      <span class="field-title"
        >Name: <a>{{ patientInfo.name }}</a>
      </span>
    </div>
    <div>
      <span class="field-title patient-info-sex">[{{ patientInfo.sex }}]</span>
    </div>
    <div>
      <span class="field-title"> {{ patientInfo.age }} <a>Yrs</a></span>
    </div>
  </div>
  <div class="patient-grid-container">
    <div>
      <span class="field-title"
        >Status: <a>{{ status }}</a></span
      >
    </div>
    <div>
      <span class="field-title"
        >Date of creation:
        <a>{{ patientInfo.lastUpdate | date: 'dd-MM-yyyy' }}</a></span
      >
    </div>
    <div>
      <span class="field-title"
        >Time: <a>{{ patientInfo.lastUpdate | date: 'HH:mm:ss' }}</a>
      </span>
    </div>
  </div>
  <div class="patient-grid-container">
    <div>
      <span
        >Ref. Physician: <a>{{ patientInfo.referringPhysicianName }}</a></span
      >
    </div>
  </div>
  <hr class="common-hr" />
  <h4>
    <span class="clinical-comments-align">
      {{ reportPageText.clinicalHistory | uppercase }}</span
    >
  </h4>
  <p class="history">
    {{ clinicalHistory }}
  </p>

  <div style="position: relative;">
    <div class="image-container">
      <div class="findings-left-content-top">
        <div class="box-title">
          {{ reportPageText.impressions | uppercase }}
        </div>
        <div
          class="inside-content-align"
          *ngFor="let impression of annotatedImpression"
        >
          > {{ impression.name }}
        </div>
      </div>
      <div class="findings-left-content-bottom">
        <div class="box-title">{{ reportPageText.findings | uppercase }}</div>
        <div class="inside-content-align" *ngFor="let finding of pdfFindings">
          > {{ finding }}
        </div>
      </div>
    </div>
    <div
      class="xray-right-content"
      id="xray-right-content"
      style="position: absolute;"
    >
      <div class="box-title">XRAY</div>
      <div align="center">
        <img
          [src]="annotatedImage"
          alt=""
          [ngStyle]="{
            'width.px': canvasCorrectedWidth,
            'height.px': canvasCorrectedHeight
          }"
        />
      </div>
    </div>
  </div>
  <h4>
    <span class="clinical-comments-align">{{
      reportPageText.commentsAndRecommendations | uppercase
    }}</span>
  </h4>

  <p class="history">
    {{ pdfComments }}
  </p>

  <div>
    <cxr-report-footer></cxr-report-footer>
  </div>
</div>
